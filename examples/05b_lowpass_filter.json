{
  "id": "example-lowpass-filter",
  "metadata": {
    "name": "Low-Pass Filter Comparison",
    "description": "Compares 1st-order LPF with higher-order Butterworth and Bessel filters. Shows how filter order affects noise rejection and phase lag. All filters set to 3 Hz cutoff to enable direct comparison. Reference: https://www.mathworks.com/help/dsp/ref/lowpassfilter.html",
    "author": "LibreSim Examples",
    "createdAt": "2024-01-01T00:00:00Z",
    "modifiedAt": "2024-01-01T00:00:00Z",
    "version": "1.0.0"
  },
  "blocks": [
    {
      "id": "sine_signal",
      "type": "sine_wave",
      "name": "Clean Signal (1 Hz)",
      "position": { "x": 50, "y": 100 },
      "parameters": {
        "amplitude": 1.0,
        "frequency": 1.0,
        "phase": 0,
        "bias": 0
      },
      "inputPorts": [],
      "outputPorts": [
        { "id": "sine_signal-out", "name": "out", "dataType": "double", "dimensions": [1] }
      ]
    },
    {
      "id": "noise1",
      "type": "white_noise",
      "name": "AWGN",
      "position": { "x": 50, "y": 200 },
      "parameters": {
        "mean": 0,
        "variance": 0.04,
        "seed": 123,
        "sampleTime": 0
      },
      "inputPorts": [],
      "outputPorts": [
        { "id": "noise1-out", "name": "out", "dataType": "double", "dimensions": [1] }
      ]
    },
    {
      "id": "sum1",
      "type": "sum",
      "name": "Noisy Signal",
      "position": { "x": 200, "y": 150 },
      "parameters": {
        "signs": "++"
      },
      "inputPorts": [
        { "id": "sum1-in1", "name": "in1", "dataType": "double", "dimensions": [1] },
        { "id": "sum1-in2", "name": "in2", "dataType": "double", "dimensions": [1] }
      ],
      "outputPorts": [
        { "id": "sum1-out", "name": "out", "dataType": "double", "dimensions": [1] }
      ]
    },
    {
      "id": "lpf_1st",
      "type": "low_pass_filter",
      "name": "1st Order (3 Hz)",
      "position": { "x": 380, "y": 60 },
      "parameters": {
        "cutoffFrequency": 3.0
      },
      "inputPorts": [
        { "id": "lpf_1st-in", "name": "in", "dataType": "double", "dimensions": [1] }
      ],
      "outputPorts": [
        { "id": "lpf_1st-out", "name": "out", "dataType": "double", "dimensions": [1] }
      ]
    },
    {
      "id": "butter_1st",
      "type": "analog_filter",
      "name": "Butter 1st (3 Hz)",
      "position": { "x": 380, "y": 130 },
      "parameters": {
        "design": "butterworth",
        "response": "lowpass",
        "order": 1,
        "cutoffFrequency": 3.0
      },
      "inputPorts": [
        { "id": "butter_1st-in", "name": "in", "dataType": "double", "dimensions": [1] }
      ],
      "outputPorts": [
        { "id": "butter_1st-out", "name": "out", "dataType": "double", "dimensions": [1] }
      ]
    },
    {
      "id": "butter_2nd",
      "type": "analog_filter",
      "name": "Butter 2nd (3 Hz)",
      "position": { "x": 380, "y": 200 },
      "parameters": {
        "design": "butterworth",
        "response": "lowpass",
        "order": 2,
        "cutoffFrequency": 3.0
      },
      "inputPorts": [
        { "id": "butter_2nd-in", "name": "in", "dataType": "double", "dimensions": [1] }
      ],
      "outputPorts": [
        { "id": "butter_2nd-out", "name": "out", "dataType": "double", "dimensions": [1] }
      ]
    },
    {
      "id": "butter_4th",
      "type": "analog_filter",
      "name": "Butter 4th (3 Hz)",
      "position": { "x": 380, "y": 270 },
      "parameters": {
        "design": "butterworth",
        "response": "lowpass",
        "order": 4,
        "cutoffFrequency": 3.0
      },
      "inputPorts": [
        { "id": "butter_4th-in", "name": "in", "dataType": "double", "dimensions": [1] }
      ],
      "outputPorts": [
        { "id": "butter_4th-out", "name": "out", "dataType": "double", "dimensions": [1] }
      ]
    },
    {
      "id": "bessel_2nd",
      "type": "analog_filter",
      "name": "Bessel 2nd (3 Hz)",
      "position": { "x": 380, "y": 340 },
      "parameters": {
        "design": "bessel",
        "response": "lowpass",
        "order": 2,
        "cutoffFrequency": 3.0
      },
      "inputPorts": [
        { "id": "bessel_2nd-in", "name": "in", "dataType": "double", "dimensions": [1] }
      ],
      "outputPorts": [
        { "id": "bessel_2nd-out", "name": "out", "dataType": "double", "dimensions": [1] }
      ]
    },
    {
      "id": "scope1",
      "type": "scope",
      "name": "Filter Comparison",
      "position": { "x": 580, "y": 180 },
      "parameters": {
        "numInputs": 7
      },
      "inputPorts": [
        { "id": "scope1-in1", "name": "Clean", "dataType": "double", "dimensions": [1] },
        { "id": "scope1-in2", "name": "Noisy", "dataType": "double", "dimensions": [1] },
        { "id": "scope1-in3", "name": "LPF 1st", "dataType": "double", "dimensions": [1] },
        { "id": "scope1-in4", "name": "Butter 1st", "dataType": "double", "dimensions": [1] },
        { "id": "scope1-in5", "name": "Butter 2nd", "dataType": "double", "dimensions": [1] },
        { "id": "scope1-in6", "name": "Butter 4th", "dataType": "double", "dimensions": [1] },
        { "id": "scope1-in7", "name": "Bessel 2nd", "dataType": "double", "dimensions": [1] }
      ],
      "outputPorts": []
    }
  ],
  "connections": [
    { "id": "conn1", "sourceBlockId": "sine_signal", "sourcePortId": "sine_signal-out", "targetBlockId": "sum1", "targetPortId": "sum1-in1" },
    { "id": "conn2", "sourceBlockId": "noise1", "sourcePortId": "noise1-out", "targetBlockId": "sum1", "targetPortId": "sum1-in2" },
    { "id": "conn3", "sourceBlockId": "sum1", "sourcePortId": "sum1-out", "targetBlockId": "lpf_1st", "targetPortId": "lpf_1st-in" },
    { "id": "conn4", "sourceBlockId": "sum1", "sourcePortId": "sum1-out", "targetBlockId": "butter_1st", "targetPortId": "butter_1st-in" },
    { "id": "conn5", "sourceBlockId": "sum1", "sourcePortId": "sum1-out", "targetBlockId": "butter_2nd", "targetPortId": "butter_2nd-in" },
    { "id": "conn6", "sourceBlockId": "sum1", "sourcePortId": "sum1-out", "targetBlockId": "butter_4th", "targetPortId": "butter_4th-in" },
    { "id": "conn7", "sourceBlockId": "sum1", "sourcePortId": "sum1-out", "targetBlockId": "bessel_2nd", "targetPortId": "bessel_2nd-in" },
    { "id": "conn8", "sourceBlockId": "sine_signal", "sourcePortId": "sine_signal-out", "targetBlockId": "scope1", "targetPortId": "scope1-in1" },
    { "id": "conn9", "sourceBlockId": "sum1", "sourcePortId": "sum1-out", "targetBlockId": "scope1", "targetPortId": "scope1-in2" },
    { "id": "conn10", "sourceBlockId": "lpf_1st", "sourcePortId": "lpf_1st-out", "targetBlockId": "scope1", "targetPortId": "scope1-in3" },
    { "id": "conn11", "sourceBlockId": "butter_1st", "sourcePortId": "butter_1st-out", "targetBlockId": "scope1", "targetPortId": "scope1-in4" },
    { "id": "conn12", "sourceBlockId": "butter_2nd", "sourcePortId": "butter_2nd-out", "targetBlockId": "scope1", "targetPortId": "scope1-in5" },
    { "id": "conn13", "sourceBlockId": "butter_4th", "sourcePortId": "butter_4th-out", "targetBlockId": "scope1", "targetPortId": "scope1-in6" },
    { "id": "conn14", "sourceBlockId": "bessel_2nd", "sourcePortId": "bessel_2nd-out", "targetBlockId": "scope1", "targetPortId": "scope1-in7" }
  ],
  "simulationConfig": {
    "solver": "rk4",
    "startTime": 0,
    "stopTime": 5,
    "stepSize": 0.001
  }
}
