import type { Model } from '../types/model'

export interface ExampleInfo {
  id: string
  name: string
  description: string
  category: 'basic' | 'control' | 'signal' | 'advanced'
}

export const exampleList: ExampleInfo[] = [
  {
    id: '01_sine_wave_basic',
    name: 'Sine Wave Basic',
    description: 'Basic sine wave visualization',
    category: 'basic',
  },
  {
    id: '02_first_order_step_response',
    name: 'First-Order Step Response',
    description: 'First-order system step response',
    category: 'basic',
  },
  {
    id: '03_pid_controller',
    name: 'PID Controller',
    description: 'PID control of second-order plant',
    category: 'control',
  },
  {
    id: '04_mass_spring_damper',
    name: 'Mass-Spring-Damper',
    description: 'Mechanical system simulation',
    category: 'control',
  },
  {
    id: '05_signal_filtering',
    name: 'Signal Filtering',
    description: 'Low-pass filter demonstration',
    category: 'signal',
  },
  {
    id: '06_kalman_filter_estimation',
    name: 'Kalman Filter',
    description: 'State estimation with Kalman filter',
    category: 'advanced',
  },
  {
    id: '07_thermostat_relay_control',
    name: 'Thermostat Relay',
    description: 'Bang-bang/relay control',
    category: 'control',
  },
  {
    id: '08_lookup_table_nonlinear',
    name: 'Lookup Table',
    description: 'Nonlinear function via lookup table',
    category: 'signal',
  },
  {
    id: '09_second_order_damping',
    name: 'Second-Order Damping',
    description: 'Damping ratio comparison',
    category: 'basic',
  },
  {
    id: '10_rate_limiting_quantization',
    name: 'Rate Limiting',
    description: 'Rate limiter and quantization effects',
    category: 'signal',
  },
]

// Embedded example models - since we can't dynamically load files in the browser
// we embed the most commonly used examples directly
export const embeddedExamples: Record<string, Model> = {
  '01_sine_wave_basic': {
    id: 'example-sine-wave',
    metadata: {
      name: 'Sine Wave Basic',
      description: 'A simple sine wave generator connected to a scope for visualization.',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'sine1',
        type: 'sine_wave',
        name: 'Sine',
        position: { x: 100, y: 150 },
        parameters: { amplitude: 1, frequency: 1, phase: 0, bias: 0 },
        inputPorts: [],
        outputPorts: [{ id: 'sine1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Scope',
        position: { x: 350, y: 150 },
        parameters: { numInputs: 1 },
        inputPorts: [{ id: 'scope1-in1', name: 'in1', dataType: 'double', dimensions: [1] }],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'sine1', sourcePortId: 'sine1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 10, stepSize: 0.01 },
  },
  '02_first_order_step_response': {
    id: 'example-first-order',
    metadata: {
      name: 'First-Order Step Response',
      description: 'Step response of a first-order system G(s) = 1/(s+1).',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'step1',
        type: 'step',
        name: 'Step',
        position: { x: 100, y: 150 },
        parameters: { stepTime: 1.0, initialValue: 0, finalValue: 1 },
        inputPorts: [],
        outputPorts: [{ id: 'step1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'tf1',
        type: 'transfer_function',
        name: 'G(s)',
        position: { x: 280, y: 150 },
        parameters: { numerator: [1], denominator: [1, 1] },
        inputPorts: [{ id: 'tf1-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'tf1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Response',
        position: { x: 480, y: 150 },
        parameters: { numInputs: 2 },
        inputPorts: [
          { id: 'scope1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'tf1', targetPortId: 'tf1-in' },
      { id: 'conn2', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn3', sourceBlockId: 'tf1', sourcePortId: 'tf1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 10, stepSize: 0.01 },
  },
  '03_pid_controller': {
    id: 'example-pid-controller',
    metadata: {
      name: 'PID Controller',
      description: 'Closed-loop PID control of a second-order plant.',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'step1',
        type: 'step',
        name: 'Reference',
        position: { x: 50, y: 150 },
        parameters: { stepTime: 1.0, initialValue: 0, finalValue: 1 },
        inputPorts: [],
        outputPorts: [{ id: 'step1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'sum1',
        type: 'sum',
        name: 'Error',
        position: { x: 180, y: 150 },
        parameters: { signs: '+-' },
        inputPorts: [
          { id: 'sum1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'sum1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [{ id: 'sum1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'pid1',
        type: 'pid_controller',
        name: 'PID',
        position: { x: 310, y: 150 },
        parameters: { Kp: 10, Ki: 5, Kd: 2, N: 100 },
        inputPorts: [{ id: 'pid1-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'pid1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'plant1',
        type: 'transfer_function',
        name: 'Plant',
        position: { x: 450, y: 150 },
        parameters: { numerator: [1], denominator: [1, 2, 1] },
        inputPorts: [{ id: 'plant1-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'plant1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Response',
        position: { x: 620, y: 150 },
        parameters: { numInputs: 2 },
        inputPorts: [
          { id: 'scope1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'sum1', targetPortId: 'sum1-in1' },
      { id: 'conn2', sourceBlockId: 'sum1', sourcePortId: 'sum1-out', targetBlockId: 'pid1', targetPortId: 'pid1-in' },
      { id: 'conn3', sourceBlockId: 'pid1', sourcePortId: 'pid1-out', targetBlockId: 'plant1', targetPortId: 'plant1-in' },
      { id: 'conn4', sourceBlockId: 'plant1', sourcePortId: 'plant1-out', targetBlockId: 'sum1', targetPortId: 'sum1-in2' },
      { id: 'conn5', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn6', sourceBlockId: 'plant1', sourcePortId: 'plant1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 15, stepSize: 0.01 },
  },
  '04_mass_spring_damper': {
    id: 'example-mass-spring-damper',
    metadata: {
      name: 'Mass-Spring-Damper',
      description: 'Mechanical vibration system simulation.',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'step1',
        type: 'step',
        name: 'Force',
        position: { x: 50, y: 150 },
        parameters: { stepTime: 0.5, initialValue: 0, finalValue: 10 },
        inputPorts: [],
        outputPorts: [{ id: 'step1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'sum1',
        type: 'sum',
        name: 'Sum',
        position: { x: 180, y: 150 },
        parameters: { signs: '+--' },
        inputPorts: [
          { id: 'sum1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'sum1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
          { id: 'sum1-in3', name: 'in3', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [{ id: 'sum1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'gain_m',
        type: 'gain',
        name: '1/m',
        position: { x: 300, y: 150 },
        parameters: { gain: 1 },
        inputPorts: [{ id: 'gain_m-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'gain_m-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'int1',
        type: 'integrator',
        name: 'Velocity',
        position: { x: 420, y: 150 },
        parameters: { initialCondition: 0 },
        inputPorts: [{ id: 'int1-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'int1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'int2',
        type: 'integrator',
        name: 'Position',
        position: { x: 540, y: 150 },
        parameters: { initialCondition: 0 },
        inputPorts: [{ id: 'int2-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'int2-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'gain_b',
        type: 'gain',
        name: 'b (damping)',
        position: { x: 420, y: 280 },
        parameters: { gain: 2 },
        inputPorts: [{ id: 'gain_b-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'gain_b-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'gain_k',
        type: 'gain',
        name: 'k (spring)',
        position: { x: 540, y: 280 },
        parameters: { gain: 10 },
        inputPorts: [{ id: 'gain_k-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'gain_k-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Scope',
        position: { x: 680, y: 150 },
        parameters: { numInputs: 2 },
        inputPorts: [
          { id: 'scope1-in1', name: 'Position', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'Velocity', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'sum1', targetPortId: 'sum1-in1' },
      { id: 'conn2', sourceBlockId: 'sum1', sourcePortId: 'sum1-out', targetBlockId: 'gain_m', targetPortId: 'gain_m-in' },
      { id: 'conn3', sourceBlockId: 'gain_m', sourcePortId: 'gain_m-out', targetBlockId: 'int1', targetPortId: 'int1-in' },
      { id: 'conn4', sourceBlockId: 'int1', sourcePortId: 'int1-out', targetBlockId: 'int2', targetPortId: 'int2-in' },
      { id: 'conn5', sourceBlockId: 'int1', sourcePortId: 'int1-out', targetBlockId: 'gain_b', targetPortId: 'gain_b-in' },
      { id: 'conn6', sourceBlockId: 'int2', sourcePortId: 'int2-out', targetBlockId: 'gain_k', targetPortId: 'gain_k-in' },
      { id: 'conn7', sourceBlockId: 'gain_b', sourcePortId: 'gain_b-out', targetBlockId: 'sum1', targetPortId: 'sum1-in2' },
      { id: 'conn8', sourceBlockId: 'gain_k', sourcePortId: 'gain_k-out', targetBlockId: 'sum1', targetPortId: 'sum1-in3' },
      { id: 'conn9', sourceBlockId: 'int2', sourcePortId: 'int2-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn10', sourceBlockId: 'int1', sourcePortId: 'int1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 10, stepSize: 0.01 },
  },
  '09_second_order_damping': {
    id: 'example-second-order-damping',
    metadata: {
      name: 'Second-Order Damping',
      description: 'Comparison of different damping ratios.',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'step1',
        type: 'step',
        name: 'Step',
        position: { x: 50, y: 200 },
        parameters: { stepTime: 0.5, initialValue: 0, finalValue: 1 },
        inputPorts: [],
        outputPorts: [{ id: 'step1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'tf_under',
        type: 'transfer_function',
        name: 'Underdamped',
        position: { x: 250, y: 100 },
        parameters: { numerator: [1], denominator: [1, 0.5, 1] },
        inputPorts: [{ id: 'tf_under-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'tf_under-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'tf_crit',
        type: 'transfer_function',
        name: 'Critical',
        position: { x: 250, y: 200 },
        parameters: { numerator: [1], denominator: [1, 2, 1] },
        inputPorts: [{ id: 'tf_crit-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'tf_crit-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'tf_over',
        type: 'transfer_function',
        name: 'Overdamped',
        position: { x: 250, y: 300 },
        parameters: { numerator: [1], denominator: [1, 4, 1] },
        inputPorts: [{ id: 'tf_over-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'tf_over-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Compare',
        position: { x: 480, y: 200 },
        parameters: { numInputs: 3 },
        inputPorts: [
          { id: 'scope1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in3', name: 'in3', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'tf_under', targetPortId: 'tf_under-in' },
      { id: 'conn2', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'tf_crit', targetPortId: 'tf_crit-in' },
      { id: 'conn3', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'tf_over', targetPortId: 'tf_over-in' },
      { id: 'conn4', sourceBlockId: 'tf_under', sourcePortId: 'tf_under-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn5', sourceBlockId: 'tf_crit', sourcePortId: 'tf_crit-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
      { id: 'conn6', sourceBlockId: 'tf_over', sourcePortId: 'tf_over-out', targetBlockId: 'scope1', targetPortId: 'scope1-in3' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 15, stepSize: 0.01 },
  },
}

export function getExample(id: string): Model | undefined {
  return embeddedExamples[id]
}
