import type { Model } from '../types/model'

export interface ExampleInfo {
  id: string
  name: string
  description: string
  category: 'basic' | 'control' | 'signal' | 'advanced'
}

export const exampleList: ExampleInfo[] = [
  {
    id: '01_sine_wave_basic',
    name: 'Sine Wave Basic',
    description: 'Basic sine wave visualization',
    category: 'basic',
  },
  {
    id: '02_first_order_step_response',
    name: 'First-Order Step Response',
    description: 'First-order system step response',
    category: 'basic',
  },
  {
    id: '03_pid_controller',
    name: 'PID Controller',
    description: 'PID control of second-order plant',
    category: 'control',
  },
  {
    id: '04_mass_spring_damper',
    name: 'Mass-Spring-Damper (Simscape)',
    description: 'Overdamped mechanical system (Simscape defaults)',
    category: 'control',
  },
  {
    id: '04b_mass_spring_damper_underdamped',
    name: 'Mass-Spring-Damper (Underdamped)',
    description: 'Oscillatory mechanical system for teaching',
    category: 'control',
  },
  {
    id: '05a_moving_average_filter',
    name: 'Moving Average Filter',
    description: 'AWGN noise smoothing with different window sizes',
    category: 'signal',
  },
  {
    id: '05b_lowpass_filter',
    name: 'Low-Pass Filter',
    description: 'AWGN noise reduction with different cutoff frequencies',
    category: 'signal',
  },
  {
    id: '06_kalman_filter_estimation',
    name: 'Kalman Filter',
    description: 'State estimation with Kalman filter',
    category: 'advanced',
  },
  {
    id: '07_thermostat_relay_control',
    name: 'Thermostat Relay',
    description: 'Bang-bang/relay control',
    category: 'control',
  },
  {
    id: '08_lookup_table_nonlinear',
    name: 'Lookup Table - Motor Curve',
    description: 'Motor torque/efficiency curves via lookup tables',
    category: 'signal',
  },
  {
    id: '09_second_order_damping',
    name: 'Second-Order Damping',
    description: 'Damping ratio comparison',
    category: 'basic',
  },
  {
    id: '10_rate_limiting_quantization',
    name: 'Rate Limiting',
    description: 'Rate limiter and quantization effects',
    category: 'signal',
  },
]

// Embedded example models - since we can't dynamically load files in the browser
// we embed the most commonly used examples directly
export const embeddedExamples: Record<string, Model> = {
  '01_sine_wave_basic': {
    id: 'example-sine-wave',
    metadata: {
      name: 'Sine Wave Basic',
      description: 'A simple sine wave generator connected to a scope for visualization. Reference: https://www.mathworks.com/help/simulink/slref/sinewave.html',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'sine1',
        type: 'sine_wave',
        name: 'Sine',
        position: { x: 100, y: 150 },
        parameters: { amplitude: 1, frequency: 1, phase: 0, bias: 0 },
        inputPorts: [],
        outputPorts: [{ id: 'sine1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Scope',
        position: { x: 350, y: 150 },
        parameters: { numInputs: 1 },
        inputPorts: [{ id: 'scope1-in1', name: 'in1', dataType: 'double', dimensions: [1] }],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'sine1', sourcePortId: 'sine1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 10, stepSize: 0.01 },
  },
  '02_first_order_step_response': {
    id: 'example-first-order',
    metadata: {
      name: 'First-Order Step Response',
      description: 'Step response of a first-order system G(s) = 1/(s+1). Reference: https://www.mathworks.com/help/simulink/slref/transferfcn.html',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'step1',
        type: 'step',
        name: 'Step',
        position: { x: 100, y: 150 },
        parameters: { stepTime: 1.0, initialValue: 0, finalValue: 1 },
        inputPorts: [],
        outputPorts: [{ id: 'step1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'tf1',
        type: 'transfer_function',
        name: 'G(s)',
        position: { x: 280, y: 150 },
        parameters: { numerator: [1], denominator: [1, 1] },
        inputPorts: [{ id: 'tf1-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'tf1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Response',
        position: { x: 480, y: 150 },
        parameters: { numInputs: 2 },
        inputPorts: [
          { id: 'scope1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'tf1', targetPortId: 'tf1-in' },
      { id: 'conn2', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn3', sourceBlockId: 'tf1', sourcePortId: 'tf1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 10, stepSize: 0.01 },
  },
  '03_pid_controller': {
    id: 'example-pid-controller',
    metadata: {
      name: 'PID Controller',
      description: 'Closed-loop PID control of a second-order plant. Reference: https://www.mathworks.com/help/simulink/slref/pidcontroller.html',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'step1',
        type: 'step',
        name: 'Reference',
        position: { x: 50, y: 150 },
        parameters: { stepTime: 1.0, initialValue: 0, finalValue: 1 },
        inputPorts: [],
        outputPorts: [{ id: 'step1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'sum1',
        type: 'sum',
        name: 'Error',
        position: { x: 180, y: 150 },
        parameters: { signs: '+-' },
        inputPorts: [
          { id: 'sum1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'sum1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [{ id: 'sum1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'pid1',
        type: 'pid_controller',
        name: 'PID',
        position: { x: 310, y: 150 },
        parameters: { Kp: 10, Ki: 5, Kd: 2, N: 100 },
        inputPorts: [{ id: 'pid1-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'pid1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'plant1',
        type: 'transfer_function',
        name: 'Plant',
        position: { x: 450, y: 150 },
        parameters: { numerator: [1], denominator: [1, 2, 1] },
        inputPorts: [{ id: 'plant1-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'plant1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Response',
        position: { x: 620, y: 150 },
        parameters: { numInputs: 2 },
        inputPorts: [
          { id: 'scope1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'sum1', targetPortId: 'sum1-in1' },
      { id: 'conn2', sourceBlockId: 'sum1', sourcePortId: 'sum1-out', targetBlockId: 'pid1', targetPortId: 'pid1-in' },
      { id: 'conn3', sourceBlockId: 'pid1', sourcePortId: 'pid1-out', targetBlockId: 'plant1', targetPortId: 'plant1-in' },
      { id: 'conn4', sourceBlockId: 'plant1', sourcePortId: 'plant1-out', targetBlockId: 'sum1', targetPortId: 'sum1-in2' },
      { id: 'conn5', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn6', sourceBlockId: 'plant1', sourcePortId: 'plant1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 15, stepSize: 0.01 },
  },
  '04_mass_spring_damper': {
    id: 'example-mass-spring-damper',
    metadata: {
      name: 'Mass-Spring-Damper (Simscape Defaults)',
      description: 'Mechanical system using Simscape default parameters: m=1kg, c=100 N·s/m, k=1000 N/m. Creates overdamped response (ζ≈1.58). Reference: https://www.mathworks.com/help/simscape/ug/mass-spring-damper-in-simulink-and-simscape.html',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'step1',
        type: 'step',
        name: 'Force',
        position: { x: 50, y: 150 },
        parameters: { stepTime: 0, initialValue: 0, finalValue: 1000 },
        inputPorts: [],
        outputPorts: [{ id: 'step1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'sum1',
        type: 'sum',
        name: 'Sum',
        position: { x: 180, y: 150 },
        parameters: { signs: '+--' },
        inputPorts: [
          { id: 'sum1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'sum1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
          { id: 'sum1-in3', name: 'in3', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [{ id: 'sum1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'gain_m',
        type: 'gain',
        name: '1/m',
        position: { x: 300, y: 150 },
        parameters: { gain: 1 },
        inputPorts: [{ id: 'gain_m-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'gain_m-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'int1',
        type: 'integrator',
        name: 'Velocity',
        position: { x: 420, y: 150 },
        parameters: { initialCondition: 0 },
        inputPorts: [{ id: 'int1-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'int1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'int2',
        type: 'integrator',
        name: 'Position',
        position: { x: 540, y: 150 },
        parameters: { initialCondition: 0 },
        inputPorts: [{ id: 'int2-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'int2-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'gain_b',
        type: 'gain',
        name: 'c (damping)',
        position: { x: 420, y: 280 },
        parameters: { gain: 100 },
        inputPorts: [{ id: 'gain_b-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'gain_b-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'gain_k',
        type: 'gain',
        name: 'k (spring)',
        position: { x: 540, y: 280 },
        parameters: { gain: 1000 },
        inputPorts: [{ id: 'gain_k-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'gain_k-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Scope',
        position: { x: 680, y: 150 },
        parameters: { numInputs: 2 },
        inputPorts: [
          { id: 'scope1-in1', name: 'Position', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'Velocity', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'sum1', targetPortId: 'sum1-in1' },
      { id: 'conn2', sourceBlockId: 'sum1', sourcePortId: 'sum1-out', targetBlockId: 'gain_m', targetPortId: 'gain_m-in' },
      { id: 'conn3', sourceBlockId: 'gain_m', sourcePortId: 'gain_m-out', targetBlockId: 'int1', targetPortId: 'int1-in' },
      { id: 'conn4', sourceBlockId: 'int1', sourcePortId: 'int1-out', targetBlockId: 'int2', targetPortId: 'int2-in' },
      { id: 'conn5', sourceBlockId: 'int1', sourcePortId: 'int1-out', targetBlockId: 'gain_b', targetPortId: 'gain_b-in' },
      { id: 'conn6', sourceBlockId: 'int2', sourcePortId: 'int2-out', targetBlockId: 'gain_k', targetPortId: 'gain_k-in' },
      { id: 'conn7', sourceBlockId: 'gain_b', sourcePortId: 'gain_b-out', targetBlockId: 'sum1', targetPortId: 'sum1-in2' },
      { id: 'conn8', sourceBlockId: 'gain_k', sourcePortId: 'gain_k-out', targetBlockId: 'sum1', targetPortId: 'sum1-in3' },
      { id: 'conn9', sourceBlockId: 'int2', sourcePortId: 'int2-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn10', sourceBlockId: 'int1', sourcePortId: 'int1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 2, stepSize: 0.001 },
  },
  '04b_mass_spring_damper_underdamped': {
    id: 'example-mass-spring-damper-underdamped',
    metadata: {
      name: 'Mass-Spring-Damper (Underdamped)',
      description: 'Mechanical system with visible oscillation: m=1kg, c=2 N·s/m, k=100 N/m. Creates underdamped response (ζ=0.1, ωn=10 rad/s). Reference: https://www.mathworks.com/help/simscape/ug/mass-spring-damper-in-simulink-and-simscape.html',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'step1',
        type: 'step',
        name: 'Force',
        position: { x: 50, y: 150 },
        parameters: { stepTime: 0, initialValue: 0, finalValue: 100 },
        inputPorts: [],
        outputPorts: [{ id: 'step1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'sum1',
        type: 'sum',
        name: 'Sum',
        position: { x: 180, y: 150 },
        parameters: { signs: '+--' },
        inputPorts: [
          { id: 'sum1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'sum1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
          { id: 'sum1-in3', name: 'in3', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [{ id: 'sum1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'gain_m',
        type: 'gain',
        name: '1/m',
        position: { x: 300, y: 150 },
        parameters: { gain: 1 },
        inputPorts: [{ id: 'gain_m-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'gain_m-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'int1',
        type: 'integrator',
        name: 'Velocity',
        position: { x: 420, y: 150 },
        parameters: { initialCondition: 0 },
        inputPorts: [{ id: 'int1-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'int1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'int2',
        type: 'integrator',
        name: 'Position',
        position: { x: 540, y: 150 },
        parameters: { initialCondition: 0 },
        inputPorts: [{ id: 'int2-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'int2-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'gain_b',
        type: 'gain',
        name: 'c (damping)',
        position: { x: 420, y: 280 },
        parameters: { gain: 2 },
        inputPorts: [{ id: 'gain_b-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'gain_b-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'gain_k',
        type: 'gain',
        name: 'k (spring)',
        position: { x: 540, y: 280 },
        parameters: { gain: 100 },
        inputPorts: [{ id: 'gain_k-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'gain_k-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Scope',
        position: { x: 680, y: 150 },
        parameters: { numInputs: 2 },
        inputPorts: [
          { id: 'scope1-in1', name: 'Position', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'Velocity', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'sum1', targetPortId: 'sum1-in1' },
      { id: 'conn2', sourceBlockId: 'sum1', sourcePortId: 'sum1-out', targetBlockId: 'gain_m', targetPortId: 'gain_m-in' },
      { id: 'conn3', sourceBlockId: 'gain_m', sourcePortId: 'gain_m-out', targetBlockId: 'int1', targetPortId: 'int1-in' },
      { id: 'conn4', sourceBlockId: 'int1', sourcePortId: 'int1-out', targetBlockId: 'int2', targetPortId: 'int2-in' },
      { id: 'conn5', sourceBlockId: 'int1', sourcePortId: 'int1-out', targetBlockId: 'gain_b', targetPortId: 'gain_b-in' },
      { id: 'conn6', sourceBlockId: 'int2', sourcePortId: 'int2-out', targetBlockId: 'gain_k', targetPortId: 'gain_k-in' },
      { id: 'conn7', sourceBlockId: 'gain_b', sourcePortId: 'gain_b-out', targetBlockId: 'sum1', targetPortId: 'sum1-in2' },
      { id: 'conn8', sourceBlockId: 'gain_k', sourcePortId: 'gain_k-out', targetBlockId: 'sum1', targetPortId: 'sum1-in3' },
      { id: 'conn9', sourceBlockId: 'int2', sourcePortId: 'int2-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn10', sourceBlockId: 'int1', sourcePortId: 'int1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 5, stepSize: 0.001 },
  },
  '05a_moving_average_filter': {
    id: 'example-moving-average-filter',
    metadata: {
      name: 'Moving Average Filter - Noisy Step Smoothing',
      description: 'Demonstrates Moving Average filter smoothing a noisy step signal using AWGN. Compares different window sizes. Reference: https://www.mathworks.com/help/dsp/ref/movingaverage.html',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'step1',
        type: 'step',
        name: 'Step Input',
        position: { x: 50, y: 100 },
        parameters: { stepTime: 1.0, initialValue: 0, finalValue: 1 },
        inputPorts: [],
        outputPorts: [{ id: 'step1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'noise1',
        type: 'white_noise',
        name: 'AWGN',
        position: { x: 50, y: 200 },
        parameters: { mean: 0, variance: 0.01, seed: 42, sampleTime: 0 },
        inputPorts: [],
        outputPorts: [{ id: 'noise1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'sum_noise',
        type: 'sum',
        name: 'Add Noise',
        position: { x: 200, y: 140 },
        parameters: { signs: '++' },
        inputPorts: [
          { id: 'sum_noise-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'sum_noise-in2', name: 'in2', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [{ id: 'sum_noise-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'mavg_small',
        type: 'moving_average',
        name: 'MAF (5 samples)',
        position: { x: 380, y: 60 },
        parameters: { windowSize: 5 },
        inputPorts: [{ id: 'mavg_small-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'mavg_small-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'mavg_medium',
        type: 'moving_average',
        name: 'MAF (10 samples)',
        position: { x: 380, y: 140 },
        parameters: { windowSize: 10 },
        inputPorts: [{ id: 'mavg_medium-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'mavg_medium-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'mavg_large',
        type: 'moving_average',
        name: 'MAF (20 samples)',
        position: { x: 380, y: 220 },
        parameters: { windowSize: 20 },
        inputPorts: [{ id: 'mavg_large-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'mavg_large-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'MAF Comparison',
        position: { x: 580, y: 140 },
        parameters: { numInputs: 4 },
        inputPorts: [
          { id: 'scope1-in1', name: 'Noisy', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'MAF-5', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in3', name: 'MAF-10', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in4', name: 'MAF-20', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'sum_noise', targetPortId: 'sum_noise-in1' },
      { id: 'conn2', sourceBlockId: 'noise1', sourcePortId: 'noise1-out', targetBlockId: 'sum_noise', targetPortId: 'sum_noise-in2' },
      { id: 'conn3', sourceBlockId: 'sum_noise', sourcePortId: 'sum_noise-out', targetBlockId: 'mavg_small', targetPortId: 'mavg_small-in' },
      { id: 'conn4', sourceBlockId: 'sum_noise', sourcePortId: 'sum_noise-out', targetBlockId: 'mavg_medium', targetPortId: 'mavg_medium-in' },
      { id: 'conn5', sourceBlockId: 'sum_noise', sourcePortId: 'sum_noise-out', targetBlockId: 'mavg_large', targetPortId: 'mavg_large-in' },
      { id: 'conn6', sourceBlockId: 'sum_noise', sourcePortId: 'sum_noise-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn7', sourceBlockId: 'mavg_small', sourcePortId: 'mavg_small-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
      { id: 'conn8', sourceBlockId: 'mavg_medium', sourcePortId: 'mavg_medium-out', targetBlockId: 'scope1', targetPortId: 'scope1-in3' },
      { id: 'conn9', sourceBlockId: 'mavg_large', sourcePortId: 'mavg_large-out', targetBlockId: 'scope1', targetPortId: 'scope1-in4' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 5, stepSize: 0.001 },
  },
  '05b_lowpass_filter': {
    id: 'example-lowpass-filter',
    metadata: {
      name: 'Low-Pass Filter - Noise Reduction',
      description: 'Demonstrates Low-Pass filter removing high-frequency AWGN from a clean signal. Reference: https://www.mathworks.com/help/dsp/ref/lowpassfilter.html',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'sine_signal',
        type: 'sine_wave',
        name: 'Clean Signal (1 Hz)',
        position: { x: 50, y: 100 },
        parameters: { amplitude: 1.0, frequency: 1.0, phase: 0, bias: 0 },
        inputPorts: [],
        outputPorts: [{ id: 'sine_signal-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'noise1',
        type: 'white_noise',
        name: 'AWGN',
        position: { x: 50, y: 200 },
        parameters: { mean: 0, variance: 0.04, seed: 123, sampleTime: 0 },
        inputPorts: [],
        outputPorts: [{ id: 'noise1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'sum1',
        type: 'sum',
        name: 'Noisy Signal',
        position: { x: 200, y: 150 },
        parameters: { signs: '++' },
        inputPorts: [
          { id: 'sum1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'sum1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [{ id: 'sum1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'lpf_low',
        type: 'low_pass_filter',
        name: 'LPF (1 Hz cutoff)',
        position: { x: 380, y: 80 },
        parameters: { cutoffFrequency: 1.0 },
        inputPorts: [{ id: 'lpf_low-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'lpf_low-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'lpf_mid',
        type: 'low_pass_filter',
        name: 'LPF (3 Hz cutoff)',
        position: { x: 380, y: 170 },
        parameters: { cutoffFrequency: 3.0 },
        inputPorts: [{ id: 'lpf_mid-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'lpf_mid-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'lpf_high',
        type: 'low_pass_filter',
        name: 'LPF (10 Hz cutoff)',
        position: { x: 380, y: 260 },
        parameters: { cutoffFrequency: 10.0 },
        inputPorts: [{ id: 'lpf_high-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'lpf_high-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'LPF Comparison',
        position: { x: 580, y: 150 },
        parameters: { numInputs: 5 },
        inputPorts: [
          { id: 'scope1-in1', name: 'Clean', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'Noisy', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in3', name: 'LPF 1Hz', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in4', name: 'LPF 3Hz', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in5', name: 'LPF 10Hz', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'sine_signal', sourcePortId: 'sine_signal-out', targetBlockId: 'sum1', targetPortId: 'sum1-in1' },
      { id: 'conn2', sourceBlockId: 'noise1', sourcePortId: 'noise1-out', targetBlockId: 'sum1', targetPortId: 'sum1-in2' },
      { id: 'conn3', sourceBlockId: 'sum1', sourcePortId: 'sum1-out', targetBlockId: 'lpf_low', targetPortId: 'lpf_low-in' },
      { id: 'conn4', sourceBlockId: 'sum1', sourcePortId: 'sum1-out', targetBlockId: 'lpf_mid', targetPortId: 'lpf_mid-in' },
      { id: 'conn5', sourceBlockId: 'sum1', sourcePortId: 'sum1-out', targetBlockId: 'lpf_high', targetPortId: 'lpf_high-in' },
      { id: 'conn6', sourceBlockId: 'sine_signal', sourcePortId: 'sine_signal-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn7', sourceBlockId: 'sum1', sourcePortId: 'sum1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
      { id: 'conn8', sourceBlockId: 'lpf_low', sourcePortId: 'lpf_low-out', targetBlockId: 'scope1', targetPortId: 'scope1-in3' },
      { id: 'conn9', sourceBlockId: 'lpf_mid', sourcePortId: 'lpf_mid-out', targetBlockId: 'scope1', targetPortId: 'scope1-in4' },
      { id: 'conn10', sourceBlockId: 'lpf_high', sourcePortId: 'lpf_high-out', targetBlockId: 'scope1', targetPortId: 'scope1-in5' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 5, stepSize: 0.001 },
  },
  '06_kalman_filter_estimation': {
    id: 'example-kalman-filter',
    metadata: {
      name: 'Kalman Filter State Estimation',
      description: 'Demonstrates Kalman filter for estimating a ramp signal. Reference: https://www.mathworks.com/help/control/ug/kalman-filtering.html',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'ramp1',
        type: 'ramp',
        name: 'True Signal',
        position: { x: 50, y: 100 },
        parameters: { slope: 0.5, startTime: 0, initialOutput: 0 },
        inputPorts: [],
        outputPorts: [{ id: 'ramp1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'const1',
        type: 'constant',
        name: 'Control (0)',
        position: { x: 50, y: 250 },
        parameters: { value: 0 },
        inputPorts: [],
        outputPorts: [{ id: 'const1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'kalman1',
        type: 'kalman_filter',
        name: 'Kalman Filter',
        position: { x: 350, y: 175 },
        parameters: {
          A: [[1]],
          B: [[0.01]],
          C: [[1]],
          Q: [[0.001]],
          R: [[0.1]],
          initialState: [0],
          initialP: [[1]],
        },
        inputPorts: [
          { id: 'kalman1-in1', name: 'u', dataType: 'double', dimensions: [1] },
          { id: 'kalman1-in2', name: 'y', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [{ id: 'kalman1-out', name: 'x_hat', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Comparison',
        position: { x: 550, y: 150 },
        parameters: { numInputs: 2 },
        inputPorts: [
          { id: 'scope1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'const1', sourcePortId: 'const1-out', targetBlockId: 'kalman1', targetPortId: 'kalman1-in1' },
      { id: 'conn2', sourceBlockId: 'ramp1', sourcePortId: 'ramp1-out', targetBlockId: 'kalman1', targetPortId: 'kalman1-in2' },
      { id: 'conn3', sourceBlockId: 'ramp1', sourcePortId: 'ramp1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn4', sourceBlockId: 'kalman1', sourcePortId: 'kalman1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 10, stepSize: 0.01 },
  },
  '07_thermostat_relay_control': {
    id: 'example-thermostat-relay',
    metadata: {
      name: 'Thermostat Relay Control (Bang-Bang)',
      description: 'Thermostat-style temperature control using a relay with hysteresis. Reference: https://www.mathworks.com/help/simulink/ug/model-a-house-heating-system.html',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'setpoint',
        type: 'constant',
        name: 'Setpoint (20C)',
        position: { x: 50, y: 100 },
        parameters: { value: 20 },
        inputPorts: [],
        outputPorts: [{ id: 'setpoint-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'error_sum',
        type: 'sum',
        name: 'Error',
        position: { x: 180, y: 150 },
        parameters: { signs: '+-' },
        inputPorts: [
          { id: 'error_sum-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'error_sum-in2', name: 'in2', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [{ id: 'error_sum-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'relay1',
        type: 'relay',
        name: 'Thermostat',
        position: { x: 310, y: 150 },
        parameters: { switchOn: -2, switchOff: 2, outputOn: 5, outputOff: 0 },
        inputPorts: [{ id: 'relay1-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'relay1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'heat_loss',
        type: 'gain',
        name: 'Heat Loss',
        position: { x: 310, y: 280 },
        parameters: { gain: -0.1 },
        inputPorts: [{ id: 'heat_loss-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'heat_loss-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'net_heat',
        type: 'sum',
        name: 'Net Heat',
        position: { x: 450, y: 200 },
        parameters: { signs: '++' },
        inputPorts: [
          { id: 'net_heat-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'net_heat-in2', name: 'in2', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [{ id: 'net_heat-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'room',
        type: 'integrator',
        name: 'Room Temp',
        position: { x: 580, y: 200 },
        parameters: { initialCondition: 15 },
        inputPorts: [{ id: 'room-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'room-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Temperature',
        position: { x: 750, y: 150 },
        parameters: { numInputs: 3 },
        inputPorts: [
          { id: 'scope1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in3', name: 'in3', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'setpoint', sourcePortId: 'setpoint-out', targetBlockId: 'error_sum', targetPortId: 'error_sum-in1' },
      { id: 'conn2', sourceBlockId: 'room', sourcePortId: 'room-out', targetBlockId: 'error_sum', targetPortId: 'error_sum-in2' },
      { id: 'conn3', sourceBlockId: 'error_sum', sourcePortId: 'error_sum-out', targetBlockId: 'relay1', targetPortId: 'relay1-in' },
      { id: 'conn4', sourceBlockId: 'relay1', sourcePortId: 'relay1-out', targetBlockId: 'net_heat', targetPortId: 'net_heat-in1' },
      { id: 'conn5', sourceBlockId: 'room', sourcePortId: 'room-out', targetBlockId: 'heat_loss', targetPortId: 'heat_loss-in' },
      { id: 'conn6', sourceBlockId: 'heat_loss', sourcePortId: 'heat_loss-out', targetBlockId: 'net_heat', targetPortId: 'net_heat-in2' },
      { id: 'conn7', sourceBlockId: 'net_heat', sourcePortId: 'net_heat-out', targetBlockId: 'room', targetPortId: 'room-in' },
      { id: 'conn8', sourceBlockId: 'setpoint', sourcePortId: 'setpoint-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn9', sourceBlockId: 'room', sourcePortId: 'room-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
      { id: 'conn10', sourceBlockId: 'relay1', sourcePortId: 'relay1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in3' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 100, stepSize: 0.1 },
  },
  '08_lookup_table_nonlinear': {
    id: 'example-lookup-table',
    metadata: {
      name: 'Lookup Table - Motor Torque Curve',
      description: 'Demonstrates 1D lookup table modeling a DC motor torque-speed characteristic. Shows how lookup tables implement empirical data. Reference: https://www.mathworks.com/help/simulink/slref/1dlookuptable.html',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'ramp1',
        type: 'ramp',
        name: 'Speed Command',
        position: { x: 50, y: 180 },
        parameters: { slope: 100, startTime: 0, initialOutput: 0 },
        inputPorts: [],
        outputPorts: [{ id: 'ramp1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'lut_torque',
        type: 'lookup_table_1d',
        name: 'Torque vs Speed',
        position: { x: 250, y: 100 },
        parameters: {
          xData: [0, 200, 400, 600, 800, 1000, 1200, 1400, 1600, 1800, 2000],
          yData: [10.0, 9.8, 9.5, 9.0, 8.3, 7.5, 6.5, 5.3, 4.0, 2.5, 1.0],
        },
        inputPorts: [{ id: 'lut_torque-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'lut_torque-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'lut_efficiency',
        type: 'lookup_table_1d',
        name: 'Efficiency vs Speed',
        position: { x: 250, y: 260 },
        parameters: {
          xData: [0, 200, 400, 600, 800, 1000, 1200, 1400, 1600, 1800, 2000],
          yData: [0.0, 0.45, 0.70, 0.82, 0.88, 0.92, 0.90, 0.85, 0.78, 0.68, 0.55],
        },
        inputPorts: [{ id: 'lut_efficiency-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'lut_efficiency-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'product1',
        type: 'product',
        name: 'Power',
        position: { x: 450, y: 180 },
        parameters: { inputs: '**' },
        inputPorts: [
          { id: 'product1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'product1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [{ id: 'product1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope_speed',
        type: 'scope',
        name: 'Speed (RPM)',
        position: { x: 620, y: 50 },
        parameters: { numInputs: 1 },
        inputPorts: [{ id: 'scope_speed-in1', name: 'Speed', dataType: 'double', dimensions: [1] }],
        outputPorts: [],
      },
      {
        id: 'scope_torque',
        type: 'scope',
        name: 'Torque (N·m)',
        position: { x: 620, y: 130 },
        parameters: { numInputs: 1 },
        inputPorts: [{ id: 'scope_torque-in1', name: 'Torque', dataType: 'double', dimensions: [1] }],
        outputPorts: [],
      },
      {
        id: 'scope_efficiency',
        type: 'scope',
        name: 'Efficiency (0-1)',
        position: { x: 620, y: 210 },
        parameters: { numInputs: 1 },
        inputPorts: [{ id: 'scope_efficiency-in1', name: 'Efficiency', dataType: 'double', dimensions: [1] }],
        outputPorts: [],
      },
      {
        id: 'scope_power',
        type: 'scope',
        name: 'Power (T×η)',
        position: { x: 620, y: 290 },
        parameters: { numInputs: 1 },
        inputPorts: [{ id: 'scope_power-in1', name: 'Power', dataType: 'double', dimensions: [1] }],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'ramp1', sourcePortId: 'ramp1-out', targetBlockId: 'lut_torque', targetPortId: 'lut_torque-in' },
      { id: 'conn2', sourceBlockId: 'ramp1', sourcePortId: 'ramp1-out', targetBlockId: 'lut_efficiency', targetPortId: 'lut_efficiency-in' },
      { id: 'conn3', sourceBlockId: 'lut_torque', sourcePortId: 'lut_torque-out', targetBlockId: 'product1', targetPortId: 'product1-in1' },
      { id: 'conn4', sourceBlockId: 'lut_efficiency', sourcePortId: 'lut_efficiency-out', targetBlockId: 'product1', targetPortId: 'product1-in2' },
      { id: 'conn5', sourceBlockId: 'ramp1', sourcePortId: 'ramp1-out', targetBlockId: 'scope_speed', targetPortId: 'scope_speed-in1' },
      { id: 'conn6', sourceBlockId: 'lut_torque', sourcePortId: 'lut_torque-out', targetBlockId: 'scope_torque', targetPortId: 'scope_torque-in1' },
      { id: 'conn7', sourceBlockId: 'lut_efficiency', sourcePortId: 'lut_efficiency-out', targetBlockId: 'scope_efficiency', targetPortId: 'scope_efficiency-in1' },
      { id: 'conn8', sourceBlockId: 'product1', sourcePortId: 'product1-out', targetBlockId: 'scope_power', targetPortId: 'scope_power-in1' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 20, stepSize: 0.01 },
  },
  '09_second_order_damping': {
    id: 'example-second-order-damping',
    metadata: {
      name: 'Second-Order Damping',
      description: 'Comparison of different damping ratios (underdamped, critically damped, overdamped). Reference: https://ctms.engin.umich.edu/CTMS/index.php?example=Introduction&section=SystemAnalysis',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'step1',
        type: 'step',
        name: 'Step',
        position: { x: 50, y: 200 },
        parameters: { stepTime: 0.5, initialValue: 0, finalValue: 1 },
        inputPorts: [],
        outputPorts: [{ id: 'step1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'tf_under',
        type: 'transfer_function',
        name: 'Underdamped',
        position: { x: 250, y: 100 },
        parameters: { numerator: [1], denominator: [1, 0.5, 1] },
        inputPorts: [{ id: 'tf_under-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'tf_under-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'tf_crit',
        type: 'transfer_function',
        name: 'Critical',
        position: { x: 250, y: 200 },
        parameters: { numerator: [1], denominator: [1, 2, 1] },
        inputPorts: [{ id: 'tf_crit-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'tf_crit-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'tf_over',
        type: 'transfer_function',
        name: 'Overdamped',
        position: { x: 250, y: 300 },
        parameters: { numerator: [1], denominator: [1, 4, 1] },
        inputPorts: [{ id: 'tf_over-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'tf_over-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Compare',
        position: { x: 480, y: 200 },
        parameters: { numInputs: 3 },
        inputPorts: [
          { id: 'scope1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in3', name: 'in3', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'tf_under', targetPortId: 'tf_under-in' },
      { id: 'conn2', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'tf_crit', targetPortId: 'tf_crit-in' },
      { id: 'conn3', sourceBlockId: 'step1', sourcePortId: 'step1-out', targetBlockId: 'tf_over', targetPortId: 'tf_over-in' },
      { id: 'conn4', sourceBlockId: 'tf_under', sourcePortId: 'tf_under-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn5', sourceBlockId: 'tf_crit', sourcePortId: 'tf_crit-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
      { id: 'conn6', sourceBlockId: 'tf_over', sourcePortId: 'tf_over-out', targetBlockId: 'scope1', targetPortId: 'scope1-in3' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 15, stepSize: 0.01 },
  },
  '10_rate_limiting_quantization': {
    id: 'example-rate-limit-quantize',
    metadata: {
      name: 'Rate Limiting and Quantization Effects',
      description: 'Demonstrates actuator limitations: rate limiting and quantization. Reference: https://www.mathworks.com/help/simulink/slref/ratelimiter.html and https://www.mathworks.com/help/simulink/slref/quantizer.html',
      author: 'LibreSim Examples',
      createdAt: '2024-01-01T00:00:00Z',
      modifiedAt: '2024-01-01T00:00:00Z',
      version: '1.0.0',
    },
    blocks: [
      {
        id: 'sine1',
        type: 'sine_wave',
        name: 'Command',
        position: { x: 50, y: 150 },
        parameters: { amplitude: 5.0, frequency: 2.0, phase: 0, bias: 0 },
        inputPorts: [],
        outputPorts: [{ id: 'sine1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'rate_lim',
        type: 'rate_limiter',
        name: 'Rate Limiter',
        position: { x: 250, y: 100 },
        parameters: { risingLimit: 10, fallingLimit: -10 },
        inputPorts: [{ id: 'rate_lim-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'rate_lim-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'quant1',
        type: 'quantizer',
        name: 'Quantizer',
        position: { x: 250, y: 220 },
        parameters: { interval: 0.5 },
        inputPorts: [{ id: 'quant1-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'quant1-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'rate_quant',
        type: 'rate_limiter',
        name: 'Rate + Quant',
        position: { x: 420, y: 320 },
        parameters: { risingLimit: 10, fallingLimit: -10 },
        inputPorts: [{ id: 'rate_quant-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'rate_quant-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'quant2',
        type: 'quantizer',
        name: 'Then Quant',
        position: { x: 550, y: 320 },
        parameters: { interval: 0.5 },
        inputPorts: [{ id: 'quant2-in', name: 'in', dataType: 'double', dimensions: [1] }],
        outputPorts: [{ id: 'quant2-out', name: 'out', dataType: 'double', dimensions: [1] }],
      },
      {
        id: 'scope1',
        type: 'scope',
        name: 'Effects',
        position: { x: 700, y: 180 },
        parameters: { numInputs: 4 },
        inputPorts: [
          { id: 'scope1-in1', name: 'in1', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in2', name: 'in2', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in3', name: 'in3', dataType: 'double', dimensions: [1] },
          { id: 'scope1-in4', name: 'in4', dataType: 'double', dimensions: [1] },
        ],
        outputPorts: [],
      },
    ],
    connections: [
      { id: 'conn1', sourceBlockId: 'sine1', sourcePortId: 'sine1-out', targetBlockId: 'rate_lim', targetPortId: 'rate_lim-in' },
      { id: 'conn2', sourceBlockId: 'sine1', sourcePortId: 'sine1-out', targetBlockId: 'quant1', targetPortId: 'quant1-in' },
      { id: 'conn3', sourceBlockId: 'sine1', sourcePortId: 'sine1-out', targetBlockId: 'rate_quant', targetPortId: 'rate_quant-in' },
      { id: 'conn4', sourceBlockId: 'rate_quant', sourcePortId: 'rate_quant-out', targetBlockId: 'quant2', targetPortId: 'quant2-in' },
      { id: 'conn5', sourceBlockId: 'sine1', sourcePortId: 'sine1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in1' },
      { id: 'conn6', sourceBlockId: 'rate_lim', sourcePortId: 'rate_lim-out', targetBlockId: 'scope1', targetPortId: 'scope1-in2' },
      { id: 'conn7', sourceBlockId: 'quant1', sourcePortId: 'quant1-out', targetBlockId: 'scope1', targetPortId: 'scope1-in3' },
      { id: 'conn8', sourceBlockId: 'quant2', sourcePortId: 'quant2-out', targetBlockId: 'scope1', targetPortId: 'scope1-in4' },
    ],
    simulationConfig: { solver: 'rk4', startTime: 0, stopTime: 3, stepSize: 0.001 },
  },
}

export function getExample(id: string): Model | undefined {
  return embeddedExamples[id]
}
